<!DOCTYPE html>
<html>
<head>
    <title>HTML Form4</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        fieldset {
            width: 300px;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        legend {
            font-weight: bold;
            padding: 0 5px;
        }
        .date-inputs {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .date-inputs input[type="text"] {
            width: 40px;
            text-align: center;
            padding: 5px;
            border: 1px solid #aaa;
            margin: 0 5px;
        }
        .date-inputs span {
            font-size: 1.2em;
            margin: 0 2px;
        }
        #error-message {
            color: red;
            min-height: 20px; /* Reserve space for error message */
            margin-top: 5px;
        }
        button {
            padding: 8px 15px;
            background-color: #f0f0f0;
            border: 1px solid #aaa;
            border-radius: 3px;
            cursor: pointer;
            margin-top: 10px;
        }
        button:hover {
            background-color: #e0e0e0;
        }
    </style>
</head>
<body>
    <script>
        // --- DOM ELEMENT CREATION ---

        // Create fieldset for Date of Birth
        let fieldset = document.createElement('fieldset');
        let legend = document.createElement('legend');
        legend.innerHTML = "Date of Birth";
        fieldset.appendChild(legend);

        // Create container for date inputs
        let dateInputsDiv = document.createElement('div');
        dateInputsDiv.className = 'date-inputs';

        // Helper function to create an input element
        function createDateInput(id, placeholder, maxLength) {
            let input = document.createElement('input');
            input.type = "text";
            input.id = id;
            input.placeholder = placeholder;
            input.maxLength = maxLength;
            input.style.width = (maxLength * 10) + 'px'; // Dynamic width based on max length
            return input;
        }

        // Create Day (dd) input
        let ddInput = createDateInput('dd', 'dd', 2);
        dateInputsDiv.appendChild(ddInput);

        // Separator 1
        let separator1 = document.createElement('span');
        separator1.innerHTML = '/';
        dateInputsDiv.appendChild(separator1);

        // Create Month (mm) input
        let mmInput = createDateInput('mm', 'mm', 2);
        dateInputsDiv.appendChild(mmInput);

        // Separator 2
        let separator2 = document.createElement('span');
        separator2.innerHTML = '/';
        dateInputsDiv.appendChild(separator2);

        // Create Year (yyyy) input
        let yyyyInput = createDateInput('yyyy', 'yyyy', 4);
        dateInputsDiv.appendChild(yyyyInput);

        // Append date inputs to fieldset
        fieldset.appendChild(dateInputsDiv);

        // Add a horizontal line (for visual styling)
        let hr = document.createElement('hr');
        fieldset.appendChild(hr);

        // Create Submit button
        let submitBtn = document.createElement('button');
        submitBtn.type = "button";
        submitBtn.innerHTML = "Submit";
        fieldset.appendChild(submitBtn);

        // Create error message paragraph
        let gError = document.createElement('p');
        gError.id = "error-message";
        fieldset.appendChild(gError);

        // Append fieldset to body
        document.body.appendChild(fieldset);

        // --- VALIDATION LOGIC ---

        function displayError(message) {
            gError.innerHTML = message;
            gError.style.color = 'red';
            return false;
        }

        function clearError() {
            gError.innerHTML = "";
            gError.style.color = 'green';
            return true;
        }

        submitBtn.onclick = function validateDOB() {
            // Get values (they are strings from the input fields)
            let ddStr = ddInput.value.trim();
            let mmStr = mmInput.value.trim();
            let yyyyStr = yyyyInput.value.trim();

            let isValid = true;

            // i. Cannot be empty (Check 1)
            if (ddStr === "" || mmStr === "" || yyyyStr === "") {
                return displayError("All fields (dd, mm, yyyy) must be filled.");
            }

            // Convert strings to integers (using parseInt, as required for comparison)
            let dd = parseInt(ddStr, 10);
            let mm = parseInt(mmStr, 10);
            let yyyy = parseInt(yyyyStr, 10);

            // i. Must be a valid number (Check 2: Check for NaN after parseInt)
            // This is a simple way to check if the input was non-numeric, as parseInt returns NaN.
            if (isNaN(dd) || isNaN(mm) || isNaN(yyyy)) {
                 return displayError("Date components must be valid numbers.");
            }

            // ii. Must be a valid number (Check 3: Range Check)
            
            // Validate Day (dd: 0-31)
            if (dd < 1 || dd > 31) {
                return displayError("Day (dd) must be between 1 and 31.");
            }

            // Validate Month (mm: 1-12)
            if (mm < 1 || mm > 12) {
                return displayError("Month (mm) must be between 1 and 12.");
            }

            // Validate Year (yyyy: 1900-2016)
            if (yyyy < 1900 || yyyy > 2016) {
                return displayError("Year (yyyy) must be between 1900 and 2016.");
            }
            
            // --- Advanced Date Validation (Bonus: Check for month-specific days like Feb 30) ---
            
            // Check for months with only 30 days
            if ([4, 6, 9, 11].includes(mm) && dd > 30) {
                 return displayError(`Month ${mm} only has 30 days.`);
            }

            // Check for February (month 2)
            if (mm === 2) {
                let isLeap = (yyyy % 4 === 0 && yyyy % 100 !== 0) || (yyyy % 400 === 0);
                let maxDays = isLeap ? 29 : 28;
                
                if (dd > maxDays) {
                    return displayError(`February in ${yyyy} only has ${maxDays} days.`);
                }
            }


            // If all checks pass
            if (isValid) {
                clearError();
                // Confirmation message with the formatted date
                gError.innerHTML = `Date of Birth is valid: ${ddStr.padStart(2, '0')}/${mmStr.padStart(2, '0')}/${yyyyStr}`;
            }
        };
    </script>
</body>
</html>